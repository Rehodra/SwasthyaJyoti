<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SwasthyaJyoti — Dashboard</title>
  <link rel="icon" href="images/logo.png" type="image/png">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link rel="stylesheet" href="sub-style.css">
  <style>
    .site-footer {
      position: fixed;
      bottom: 0;
      left: 280px; 
      width: calc(100% - 280px);
      background: #023047;
      color: white;
      text-align: center;
      padding: 1rem;
      font-size: 0.9rem;
    }
  </style>
</head>
<body>
  <div class="page-layout">

    <!-- Sidebar -->
    <aside class="sidebar">
      <div>
        <div class="brand">
          <img src="images/logo.png" alt="logo" />
          <h2>SwasthyaJyoti</h2>
          <div class="sub">Your Health, Our Mission</div>
        </div>
        <nav>
          <a href="#" onclick="showSection('dashboard')" class="active">
            <i class="fa fa-chart-pie"></i> Dashboard
          </a>
          <a href="#" onclick="showSection('states')">
            <i class="fa fa-map"></i> States Data
          </a>
          <a href="#" onclick="showSection('trends')">
            <i class="fa fa-line-chart"></i> Disease Trends
          </a>
          <a href="#" onclick="showSection('reports')">
            <i class="fa fa-file-alt"></i> Reports
          </a>
          <a href="#" onclick="showSection('settings')">
            <i class="fa fa-cog"></i> Settings
          </a>
          <a href="#" onclick="showSection('help')">
            <i class="fa fa-circle-question"></i> Help Centre
          </a>
          <a href="#" onclick="showSection('contact')">
            <i class="fa fa-envelope"></i> Contact Us
          </a>
        </nav>
      </div>
      <div class="footer-note">&copy; 2025 SwasthyaJyoti</div>
    </aside>

    <!-- Main Content -->
    <div class="page-content">

      <!-- Password Protection -->
      <div id="authCard" class="center-container">
        <div class="form-card wide-card">
          <h2><i class="fa fa-lock"></i> Officer Access</h2>
          <p class="form-sub">Enter the password to unlock the dashboard</p>
          <div class="form-group">
            <label for="dashboardPass"><i class="fa fa-key"></i> Password</label>
            <input type="password" id="dashboardPass" placeholder="Enter Password" required>
          </div>
          <button class="btn-primary full-btn" onclick="checkDashboardAccess()">Unlock</button>
        </div>
      </div>

      <div id="dashboardContent" style="display:none;">
        <header>
          <h1 id="page-title">Dashboard</h1>
          <button onclick="alert('Logging Out...')" title="Logout">
            <i class="fa fa-power-off"></i> Logout
          </button>
        </header>

        <!-- Dashboard Section -->
        <div id="dashboard" class="section">
          <div class="cards">
            <div class="card"><h3>Total Residents</h3><p id="totalResidents">0</p></div>
            <div class="card"><h3>Total Registered</h3><p id="totalRegistered">0</p></div>
            <div class="card"><h3>Avg Disease Prediction %</h3><p id="avgPrediction">0%</p></div>
          </div>
          <canvas id="overviewChart"></canvas>
        </div>

        <!-- States Data -->
        <div id="states" class="section" style="display:none;">
          <h2>State-wise Data</h2>
          <table id="statesTable">
            <thead>
              <tr>
                <th>State</th>
                <th>Residents Before</th>
                <th>New Arrivals</th>
                <th>Residents After</th>
                <th>Registered</th>
                <th>Disease Prediction %</th>
                <th>Most Spread Disease</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>

        <!-- Trends Section -->
        <div id="trends" class="section" style="display:none;">
          <h2>Disease Trends</h2>
          <canvas id="diseaseChart"></canvas>
        </div>

        <!-- Reports Section -->
        <div id="reports" class="section" style="display:none;">
          <h2><i class="fa fa-file-alt"></i> Reports</h2>
          <p>Download official health reports and analytics.</p>
          <div class="cards">
            <div class="card"><i class="fa fa-file-pdf"></i><h3>Monthly Report</h3><p>Detailed data for this month.</p><button class="btn-primary">Download PDF</button></div>
            <div class="card"><i class="fa fa-file-excel"></i><h3>State-wise Data</h3><p>Full dataset in Excel.</p><button class="btn-primary">Download Excel</button></div>
            <div class="card"><i class="fa fa-chart-bar"></i><h3>Analytics Report</h3><p>Graphs & statistics.</p><button class="btn-primary">Download Charts</button></div>
          </div>
        </div>

        <!-- Settings Section -->
        <div id="settings" class="section" style="display:none;">
          <h2><i class="fa fa-cog"></i> Settings</h2>
          <div class="form-card">
            <h3>Notification Preferences</h3>
            <form>
              <div class="form-group"><label><input type="checkbox" checked> Email Alerts</label></div>
              <div class="form-group"><label><input type="checkbox"> SMS Alerts</label></div>
              <div class="form-group"><label><input type="checkbox" checked> Vaccination Reminders</label></div>
              <button type="submit" class="btn-primary">Save Settings</button>
            </form>
          </div>
        </div>

        <!-- Help Section -->
        <div id="help" class="section" style="display:none;">
          <h2><i class="fa fa-circle-question"></i> Help Centre</h2>
          <div class="faq-item"><h4><i class="fa fa-user"></i> How do I register?</h4><p>Verify OTP and fill in personal details.</p></div>
          <div class="faq-item"><h4><i class="fa fa-qrcode"></i> How do I generate a QR?</h4><p>Go to Profile → Generate QR → Download QR.</p></div>
          <div class="faq-item"><h4><i class="fa fa-chart-line"></i> What is disease prediction %?</h4><p>Shows estimated spread among arrivals.</p></div>
        </div>

        <!-- Contact Section -->
        <div id="contact" class="section" style="display:none;">
          <h2><i class="fa fa-envelope"></i> Contact Us</h2>
          <div class="cards">
            <div class="card"><i class="fa fa-envelope"></i><h3>Email</h3><p>healthsupport@kerala.gov.in</p></div>
            <div class="card"><i class="fa fa-phone"></i><h3>Phone</h3><p>+91-471-1234567</p></div>
            <div class="card"><i class="fa fa-map-marker-alt"></i><h3>Address</h3><p>Dept. of Health, Kerala</p></div>
          </div>
        </div>

        <!-- Footer -->
        <footer class="site-footer">
          <p>&copy; 2025 SwasthyaJyoti | Connecting Communities with Care</p>
        </footer>
      </div>
    </div>
  </div>

  <!-- JS -->
  <script>
    function showSection(sectionId) {
  // Hide all sections
  document.querySelectorAll('.section').forEach(sec => sec.style.display = 'none');

  // Show the selected section
  document.getElementById(sectionId).style.display = 'block';

  // Update page title
  document.getElementById('page-title').innerText =
    sectionId.charAt(0).toUpperCase() + sectionId.slice(1);

  // Remove 'active' from all sidebar links
  document.querySelectorAll('.sidebar nav a').forEach(link => link.classList.remove('active'));

  // Add 'active' to the clicked link
  const clickedLink = Array.from(document.querySelectorAll('.sidebar nav a'))
    .find(link => link.getAttribute('onclick').includes(sectionId));
  if (clickedLink) clickedLink.classList.add('active');
}


    // States Data
    const statesData = [
  { state: "Andhra Pradesh", residents: 500000, arrivals: 20000, regArrivals: 12000, disease: 12, diseaseName: "Dengue" },
  { state: "Arunachal Pradesh", residents: 150000, arrivals: 5000, regArrivals: 2500, disease: 9, diseaseName: "Malaria" },
  { state: "Assam", residents: 600000, arrivals: 30000, regArrivals: 18000, disease: 15, diseaseName: "Japanese Encephalitis" },
  { state: "Bihar", residents: 1200000, arrivals: 50000, regArrivals: 30000, disease: 18, diseaseName: "Tuberculosis" },
  { state: "Chhattisgarh", residents: 450000, arrivals: 15000, regArrivals: 9000, disease: 11, diseaseName: "Malaria" },
  { state: "Delhi", residents: 1000000, arrivals: 60000, regArrivals: 40000, disease: 7, diseaseName: "Dengue" },
  { state: "Goa", residents: 120000, arrivals: 4000, regArrivals: 2500, disease: 5, diseaseName: "Leptospirosis" },
  { state: "Gujarat", residents: 950000, arrivals: 35000, regArrivals: 20000, disease: 13, diseaseName: "Chikungunya" },
  { state: "Haryana", residents: 480000, arrivals: 18000, regArrivals: 10000, disease: 14, diseaseName: "Tuberculosis" },
  { state: "Himachal Pradesh", residents: 180000, arrivals: 7000, regArrivals: 4000, disease: 10, diseaseName: "Respiratory Infections" },
  { state: "Jharkhand", residents: 500000, arrivals: 20000, regArrivals: 12000, disease: 12, diseaseName: "Malaria" },
  { state: "Karnataka", residents: 950000, arrivals: 40000, regArrivals: 25000, disease: 16, diseaseName: "Dengue" },
  { state: "Kerala", residents: 850000, arrivals: 10000, regArrivals: 7000, disease: 8, diseaseName: "Nipah Virus" },
  { state: "Madhya Pradesh", residents: 1100000, arrivals: 45000, regArrivals: 30000, disease: 19, diseaseName: "Malaria" },
  { state: "Maharashtra", residents: 1500000, arrivals: 60000, regArrivals: 40000, disease: 20, diseaseName: "Tuberculosis" },
  { state: "Manipur", residents: 130000, arrivals: 5000, regArrivals: 3000, disease: 6, diseaseName: "HIV/AIDS" },
  { state: "Meghalaya", residents: 140000, arrivals: 6000, regArrivals: 3500, disease: 9, diseaseName: "Malaria" },
  { state: "Mizoram", residents: 120000, arrivals: 4000, regArrivals: 2500, disease: 7, diseaseName: "HIV/AIDS" },
  { state: "Nagaland", residents: 110000, arrivals: 3500, regArrivals: 2000, disease: 8, diseaseName: "Tuberculosis" },
  { state: "Odisha", residents: 700000, arrivals: 25000, regArrivals: 15000, disease: 15, diseaseName: "Malaria" },
  { state: "Punjab", residents: 600000, arrivals: 20000, regArrivals: 12000, disease: 12, diseaseName: "Hepatitis C" },
  { state: "Rajasthan", residents: 950000, arrivals: 35000, regArrivals: 20000, disease: 16, diseaseName: "Swine Flu" },
  { state: "Sikkim", residents: 80000, arrivals: 3000, regArrivals: 2000, disease: 5, diseaseName: "Respiratory Infections" },
  { state: "Tamil Nadu", residents: 1200000, arrivals: 40000, regArrivals: 25000, disease: 14, diseaseName: "Dengue" },
  { state: "Telangana", residents: 800000, arrivals: 28000, regArrivals: 18000, disease: 12, diseaseName: "Chikungunya" },
  { state: "Tripura", residents: 160000, arrivals: 6000, regArrivals: 3500, disease: 10, diseaseName: "Malaria" },
  { state: "Uttar Pradesh", residents: 2000000, arrivals: 75000, regArrivals: 50000, disease: 22, diseaseName: "Tuberculosis" },
  { state: "Uttarakhand", residents: 300000, arrivals: 12000, regArrivals: 8000, disease: 9, diseaseName: "Respiratory Infections" },
  { state: "West Bengal", residents: 1400000, arrivals: 70000, regArrivals: 45000, disease: 17, diseaseName: "Dengue" }
];

// ===== Populate Table =====
function loadDashboardData() {
  const tableBody = document.querySelector("#statesTable tbody");
  tableBody.innerHTML = "";
  statesData.forEach(s => {
    const before = s.residents;
    const after = s.residents + s.arrivals;
    const row = `
      <tr>
        <td>${s.state}</td>
        <td>${before.toLocaleString()}</td>
        <td>${s.arrivals.toLocaleString()}</td>
        <td>${after.toLocaleString()}</td>
        <td>${s.regArrivals.toLocaleString()}</td>
        <td>${s.disease}%</td>
        <td>${s.diseaseName}</td>
      </tr>`;
    tableBody.innerHTML += row;
  });



      // Totals
      const totalResidents = statesData.reduce((sum, s) => sum + s.residents + s.arrivals, 0);
      const totalRegisteredArrivals = statesData.reduce((sum, s) => sum + s.regArrivals, 0);
      const avgPrediction = (statesData.reduce((sum, s) => sum + s.disease, 0) / statesData.length).toFixed(1);

      document.getElementById("totalResidents").innerText = totalResidents.toLocaleString();
      document.getElementById("totalRegistered").innerText = totalRegisteredArrivals.toLocaleString();
      document.getElementById("avgPrediction").innerText = avgPrediction + "%";

      new Chart(document.getElementById("overviewChart"), {
        type: "bar",
        data: {
          labels: statesData.map(s => s.state),
          datasets: [
            { label: "New Arrivals", data: statesData.map(s => s.arrivals), backgroundColor: "#0a74da" },
            { label: "Registered Among Arrivals", data: statesData.map(s => s.regArrivals), backgroundColor: "#3bc9db" }
          ]
        },
        options: { responsive: true, scales: { x: { ticks: { autoSkip: false, maxRotation: 90, minRotation: 45 } } } }
      });

      new Chart(document.getElementById("diseaseChart"), {
        type: "line",
        data: {
          labels: statesData.map(s => s.state),
          datasets: [
            { label: "Disease Prediction %", data: statesData.map(s => s.disease), borderColor: "#ff6b6b", fill: false }
          ]
        }
      });
    }

    function checkDashboardAccess() {
      const password = document.getElementById("dashboardPass").value;
      if (password === "ditsa1234") {
        document.getElementById("authCard").style.display = "none";
        document.getElementById("dashboardContent").style.display = "block";
        loadDashboardData();
      } else {
        alert("❌ Incorrect password!");
      }
    }
  </script>
</body>
</html>
